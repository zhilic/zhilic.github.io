<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>先装Ubuntu再装Windows实现双系统 | Zhili&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在19年初刚开始读MCS课程时，因为在Windows中安装虚拟机遇到的各种奇葩问题，怒而告别了Windows开始使用Ubuntu。最近由于种种原因，决定还是要在小本本上装双系统，于是就产生了这个问题：在已有Ubuntu的情况下，如何加装Windows实现双系统？第一篇blog，记录一下。 准备材料 空间至少4G的U盘一个，烧录Ubuntu 18.04系统，可在Linux官网下载。 空间至少8G的U">
<meta property="og:type" content="article">
<meta property="og:title" content="先装Ubuntu再装Windows实现双系统">
<meta property="og:url" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/">
<meta property="og:site_name" content="Zhili&#39;s Blog">
<meta property="og:description" content="在19年初刚开始读MCS课程时，因为在Windows中安装虚拟机遇到的各种奇葩问题，怒而告别了Windows开始使用Ubuntu。最近由于种种原因，决定还是要在小本本上装双系统，于是就产生了这个问题：在已有Ubuntu的情况下，如何加装Windows实现双系统？第一篇blog，记录一下。 准备材料 空间至少4G的U盘一个，烧录Ubuntu 18.04系统，可在Linux官网下载。 空间至少8G的U">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5685.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5689.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5690.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5691.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5695.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5711.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5713.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5799.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5800.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5797.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5802.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5803.jpg">
<meta property="og:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5815.JPG">
<meta property="article:published_time" content="2020-09-02T05:43:47.362Z">
<meta property="article:modified_time" content="2020-09-02T05:51:53.620Z">
<meta property="article:author" content="Zhili">
<meta property="article:tag" content="system">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5685.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Zhili&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zhili&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zhilic.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-1-Ubuntu-Win10-double-sys" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/01/1-Ubuntu-Win10-double-sys/" class="article-date">
  <time datetime="2020-09-02T05:43:47.362Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tech/">Tech</a>►<a class="article-category-link" href="/categories/Tech/System/">System</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      先装Ubuntu再装Windows实现双系统
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在19年初刚开始读MCS课程时，因为在Windows中安装虚拟机遇到的各种奇葩问题，怒而告别了Windows开始使用Ubuntu。最近由于种种原因，决定还是要在小本本上装双系统，于是就产生了这个问题：在已有Ubuntu的情况下，如何加装Windows实现双系统？第一篇blog，记录一下。</p>
<h3 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h3><ul>
<li>空间至少4G的U盘一个，烧录Ubuntu 18.04系统，可在<a target="_blank" rel="noopener" href="https://ubuntu.com/download">Linux官网</a>下载。</li>
<li>空间至少8G的U盘一个，烧录Windows 10 Pro系统。因为我的Thinkpad原装该系统，可直接用本机在<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/software-download/windows10ISO">微软官网</a>下载ISO文件，安装时自动激活，不需要额外步骤。</li>
</ul>
<p>Ubuntu上有烧录软件Startup Disk Creator，但for some reason，我没能成功使用。也可以用command line来直接烧录: <code>$ sudo dd if=path-to-system-iso-file.iso of=path-to-usb-flash-drive</code>，在此之前可以用<code>lsblk</code>或其他命令来确定U盘的挂载点mount point。我最终在家里的Windows台式机上用<a target="_blank" rel="noopener" href="https://rufus.ie/en_IE.html">Rufus</a>，一款小巧的烧录工具，制作了Win10的启动盘。</p>
<h3 id="硬盘分区-重装Ubuntu"><a href="#硬盘分区-重装Ubuntu" class="headerlink" title="硬盘分区 - 重装Ubuntu"></a>硬盘分区 - 重装Ubuntu</h3><p>Linux和Windows系统使用的文件系统是不同的: Ubuntu 18.04使用的是<strong>ext4</strong>，而Windows使用的是<strong>NTFS</strong>，所以我们要给电脑硬盘进行分区，使之后两个系统分别装在不同的分区里，在不同的分区里使用对应的文件系统，互不干扰。关于不同文件系统file system的对比，可以参考<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Comparison_of_file_systems">wiki</a>。</p>
<p>原先笔记本里的Ubuntu占用了整个硬盘，因此首先要重装Ubuntu，并在重装的时候进行硬盘分区。</p>
<a id="more"></a>

<p>电脑重启时进入Boot Menu(按F12或其他键，视不同电脑而定)，并选择从USB启动。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5685.jpg" class="" width="400" title="Boot Menu">
<p>在Ubuntu启动盘选项中选择安装Ubuntu，进入Ubuntu安装界面，选择自己想用的系统语言，然后“继续”。选择正常安装并在安装过程中下载更新。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5689.jpg" class="" width="400" title="Updates and other software">
<p><strong>重点在此: 在安装类型时选择其他(Something else)，进入硬盘分区界面。</strong></p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5690.jpg" class="" width="400" title="Installation type">
<p>可以看到<code>/dev/sda2</code>是我原来的Ubuntu所在硬盘的挂载点，它的文件系统是ext4。选中这个分区，点击左下角的Change来更改它的大小。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5691.jpg" class="" width="400" title="Partition">
<p>需要注意的是，尽管在Edit partition对话框里有Use as选项(里面有ext4和NTFS选项)，看起来似乎可以指定需要这块分区来安装Ubuntu还是Windows，但事实上似乎只能选择用来安装Ubuntu的分区大小，即使选择了NTFS，对应Size那栏的分区大小也是装Ubuntu的分区大小。下图是我分完之后的样子: <code>/dev/sda2/</code>有原先的255522MB变为了170000MB，相应的，多出来了85522MB的free space，这块分区就是之后要用来安装Windows的地方。之后点OK会弹出对话框确认是否要格式化这个硬盘，选继续。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5695.jpg" class="" width="400" title="Partition Finished">
<p>此后就是根据提示正常安装Ubuntu。安装完成后，在Ubuntu的Disks应用中可以看到目前的硬盘状态。选中Free Space分区，在左下角的设置选项中选择NTFS作为它的文件系统。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5711.jpg" class="" width="400" title="Ubuntu Disks">

<h3 id="安装Windows"><a href="#安装Windows" class="headerlink" title="安装Windows"></a>安装Windows</h3><p>按以上步骤重装完Ubuntu之后，用Win10启动U盘安装Windows系统。用Rufus烧Win10时有提示消息，不能采用secure boot启动电脑，否则无法正常从USB中启动Win10安装盘(见下图)，因此我们首先要关闭电脑的secure boot(一般的默认选项)。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5713.jpg" class="" width="400" title="USB Boot Error">
<p>重启时按F1(或其他键，视不同电脑而定)进入Boot Setup，找到Secure Boot的选项，关掉。之后要正常设置双系统引导的话也需要disable secure boot，所以一直保持这个设置就好。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5799.jpg" class="" width="400" title="Boot Security">
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5800.jpg" class="" width="400" title="Disable Boot Security">
<p>从USB启动盘启动之后进入Win10的安装程序，选择在准备装Windows的硬盘分区里安装，其他都是正常安装Windows的步骤。下图是我装完双系统之后拍的，我的Win10装在第三个分区里。</p>


<h3 id="双系统引导"><a href="#双系统引导" class="headerlink" title="双系统引导"></a>双系统引导</h3><p>安装完Windows之后，电脑启动时默认进入Windows，此时可以跟网上许多教程一样选择EasyBCD引导出Ubuntu。我采用的是从Ubuntu系统的grub引导出Windows的方案，所以首先要进入Ubuntu。继续在电脑的Boot Setup里(F1进入)设置。既之前disable secure boot之后，选择同时使用UEFI和Legacy Boot，并且Legacy作为首选。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5797.jpg" class="" width="400" title="UEFI Boot">
<p>然后在Boot选项中，把Ubuntu排在第一位。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5802.jpg" class="" width="400" title="Boot Menu 1">
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5803.jpg" class="" width="400" title="Boot Menu 2">
<p>进入Ubuntu之后，更新grub，让它知道电脑里现在有双系统，并在开机时显示grub菜单。<br><code>sudo update-grub</code><br>这样设置好之后，再开机就应该可以进入Ubuntu的引导界面了。</p>
<img src="/2020/09/01/1-Ubuntu-Win10-double-sys/IMG_5815.JPG" class="" width="400" title="Grub Menu">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://zhilic.github.io/2020/09/01/1-Ubuntu-Win10-double-sys/" data-id="ckekznpw00000vl3m65wk5bss" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/system/" rel="tag">system</a></li></ul>

    </footer>
  </div>
  
    
  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/System/">System</a><span class="category-list-count">1</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/system/" rel="tag">system</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/system/" style="font-size: 10px;">system</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/01/1-Ubuntu-Win10-double-sys/">先装Ubuntu再装Windows实现双系统</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Zhili<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>